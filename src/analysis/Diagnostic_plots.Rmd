---
title: "Plots for regression analysis"

author: "team 03"
date: "2024-09-27"
output: html_document
---

## Assumptions of Linear Regression

The assumptions of the linear regression models are checked by generating diagnostic plots.The residual plots were first run with only log transformations for `numVotes` in model1 and log transformations for `episode_count` and `numVotes` in model2. However, later the `averageRating` was also log transformed to stabilize variance.


```{r setup, include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}
library(ggplot2)
library(car)
```


### Model 1: total_years

```{r model1, include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}
model1 <- lm(log_averageRating ~ total_years + log_numVotes, data = cleaned_data)
summary(model1)
```


#### Residuals vs. Fitted Plot

```{r residuals plot,include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}

plot(model1, which = 1)

```


# Inference:

Residuals vs Fitted plot helps to visually assess whether the assumptions of homoscedasticity hold for model1. The residuals represent the difference between the observed values of `averageRating` (log-transformed) and the fitted values from the model.The residuals appear to be mostly scattered without a visible trend, suggesting that the assumption of linearity has been met.There is clustering visible on the right side, but the spread is less pronounced compared to before log transformation, indicating a positive impact on stabilizing variance.The reduction indicates that the issue of homoscedasticity has largely improved.


#### Q-Q Plot for normality check

```{r qqplot,include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}
plot(model1, which = 2)

```


# Inference :

The Q-Q plot assesses whether the residuals from the regression model follow a normal distribution. Most residuals are generally aligned along the diagonal, indicating that the model captures a reasonable level of normality for the residuals. However, there are noticeable deviations at both extremes of the distribution. This suggests that there may be some non-normality in the extreme values.Given the slight deviation we continue to proceed with the current model since we have already log transformed the variables.


#### Scale-Location Plot for homoscedasticity check

```{r scale-loc plot,include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}
plot(model1, which = 3)
```


# Inference:

The scale-location plot provides a visual assessment of the homoscedasticity of residuals.There appears to be increasing variance in the residuals as the fitted values increase. This is a potential limitation, as non-constant variance may lead to unreliable standard errors, which could affect the interpretation of the results.Nevertheless, for the purposes of this analysis, we have decided to proceed with the current model without making further adjustments.But we acknowledge this as a limitation. Future analyses may consider transformations or alternative regression techniques to address this issue and improve model assumptions. 


#### Residuals vs. Leverage Plot to detect influential points

```{r residual leverage,include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}
plot(model1, which = 5)
```


# Inference :

Influential points remain even after the IQR-based outlier removal, this suggests that the dataset still has some influential observations that could be affecting the model's stability and predictions. This is a limitation of the current model, but we decide to overlook it and proceed with our analysis.Note,that these influential points may limit the robustness and reliability of the model's outcomes. 



### Model 2: log_episode_count

```{r model2, include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}
model2 <- lm(log_averageRating ~ log_episode_count + log_numVotes, data = cleaned_data)
summary(model2)
```


#### Residuals vs. Fitted Plot

```{r residuals plot,include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}

plot(model2, which = 1)

```


# Inference :

The residuals in this plot show a relatively non-uniform spread across the fitted values, particularly with clustering observed at both ends of the fitted values.The slight curvature seen in the red LOESS line suggests a deviation from linearity, and there may also be hints of heteroscedasticity, as the spread of residuals seems inconsistent across different levels of fitted values.This limitation is acknowledged and recorded for future improvements or iterations of the analysis.


#### Q-Q Plot for normality check

```{r qqplot,include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}
plot(model2, which = 2)

```


# Inference :

The deviations at the tails imply that the model does not fully satisfy the normality assumption, especially in extreme values. The residuals appear roughly normal in the middle section.We acknowledge this as a limitation but decide to proceed with the current model, documenting that the tails' departure from normality might impact statistical inference.


#### Scale-Location Plot for homoscedasticity check

```{r scale-loc plot,include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}
plot(model2, which = 3)
```


# Inference :

There is wavy pattern, and the spread of points tends to increase with fitted values. This suggests a violation of the homoscedasticity assumption, implying that the variance of residuals is not constant across the range of fitted values, which may affect the reliability of statistical inferences, particularly confidence intervals and significance tests.This limitation is acknowledged and documented.


#### Residuals vs. Leverage Plot to detect influential points

```{r leverage,include=FALSE,warning=FALSE,echo=FALSE,message=FALSE}
plot(model2, which = 5)

```


# Inference :
Influential points remain even after the IQR-based outlier removal, this suggests that the dataset still has some influential observations that could be affecting the model's stability and predictions. This is a limitation of the current model, but we decide to overlook it and proceed with our analysis.Note,that these influential points may limit the robustness and reliability of the model's outcomes. 





